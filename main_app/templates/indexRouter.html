<!DOCTYPE html>
<html>
<head lang="en">
    {% load static %}
    <meta charset="UTF-8">

    <!-- Lodash -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.10/lodash.js"></script>
    <!-- Icon -->
    <link rel="icon"  type="image/png"  href="{% static 'lifesheet.ico' %}">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">
    <!-- JQuery -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <!-- Cookie -->
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <!-- Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- Moment -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/locale/es-us.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <!-- Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
    <script src="https://unpkg.com/vue-star-rating/dist/star-rating.min.js"></script>
        <!-- CDNJS :: Sortable (https://cdnjs.com/) -->
    <script src="//cdn.jsdelivr.net/npm/sortablejs@1.7.0/Sortable.min.js"></script>
        <!-- CDNJS :: Vue.Draggable (https://cdnjs.com/) -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.16.0/vuedraggable.min.js"></script>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- vuejs-datepicker -->
    <script src="https://unpkg.com/vuejs-datepicker"></script>

    <!-- My CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'stylesheets/main.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>PillowBook</title>
</head>
<body>
    <script>
        const myAxios = axios.create({
            baseURL: 'https://www.pillow-book.com/api/', // 'http://localhost:8000/api/', //
            timeout: 1000,
            headers: {
                'X-CSRFToken': Cookies.get('csrftoken')
            },
            credentials: "include",
            'Accept': 'application/json, text/plain, */*',
            'Content-Type': 'application/json',
        });
        
        var map;
        var markers = [];
        var mapLoaded = false;
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 0, lng: 0},
                zoom: 2
            });
        }

        function dateToString(date){
            return date.getFullYear() + '-' + String(date.getMonth()+1).padStart(2,'0') + '-' + String(date.getDate()).padStart(2,'0');
        }
        window.onload = function() {
            Vue.filter('formatTime', function(value){
                if(value){
                    return moment(String(value), 'HH:mm:ss').format('h:mm a');
                }
            });
            Vue.component('star-rating', VueStarRating.default);
            Vue.filter('toCurrency', function (value) {
                if (typeof value !== "number") {
                    return value;
                }
                var formatter = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 0
                });
                return formatter.format(value);
            });
            
            var convertRatings = function(entries){
                if (Array.isArray(entries)){
                    entries.forEach(entry => entry.rating ? entry.rating = parseFloat(entry.rating) : "");
                }
                else {
                    entries.rating = parseFloat(entries.rating);
                }
                return entries;
            }

            var entryHandlingItemMixin = {
                data: function() { return { showOptions: false, deleted: false, updating: false, updated: false, hadChange: false } },
                props: ['entry','endpoint'],
                delimiters: ["[{","}]"],
                methods: {
                    updateEntry: function() {
                        myAxios.put(this.endpoint + "/" + this.entry.id, this.entry);
                        if (this.hadChange) { this.updated = false; this.updating = true; }
                        setTimeout(() => { this.updating = false; this.updated = true; this.hadChange = false }, 500);
                    },
                    deleteEntry: function() {
                        this.deleted = true;
                        myAxios.delete(this.endpoint + "/" + this.entry.id);
                    },
                    inputChanged: function(event) {
                        this.hadChange = true;
                    }
                }
            }
            var entryHandlingPageMixin = {
                delimiters: ["[{","}]"],
                data: function() {
                    return {
                        date: new Date(),
                        entries: [],
                        newEntry: {},
                        showNewEntry: false,
                        mandatoryFields:[]
                    }
                },
                mounted: function() {
                    if (this.noMixinMounted){ return }
                    myAxios.get(this.endpoint + "/" + dateToString(new Date())).then(response => this.entries = convertRatings(response.data));
                },
                watch: {
                    date: function() {
                        if (this.date === '') { return }
                        myAxios.get(this.endpoint + "/" + dateToString(this.date)).then(response => this.entries = convertRatings(response.data));
                    }
                },
                methods: {
                    createNewEntry: function() {
                        this.newEntry['date'] = this.date;
                        myAxios.post(this.endpoint, this.newEntry)
                            .then(response => {
                                this.entries.push(convertRatings(response.data)); 
                                this.showNewEntry = false;
                                this.newEntry = {};
                            });
                    },
                },
                computed: { 
                    sortedEntries: function(){ return this.entries },
                    newEntryDisabled: function(){ 
                        var disabled = false;
                        this.mandatoryFields.forEach(field => { if (!this.newEntry.hasOwnProperty(field) || this.newEntry[field].length === 0) { disabled = true; } });
                        return disabled;
                    }
                },
                components: { vuejsDatepicker }
            }
            
            var optionsStore = {
                state: {
                    tabIndent: false,
                    tabIndentSpaces: 0,
                    disableDrag: false,
                },
            }
            
            // Page Components
            Vue.component('new-entry-form', {
                props: ['newEntryDisabled'],
                methods: {
                    clicked: function(event){
                        event.preventDefault()
                        this.$emit('newEntryClicked');
                        return false;
                    }
                },
                template:
                `
                <div>
                    <form class="new-entry-form">
                        <slot></slot>
                        <button class="btn btn-primary" @click="clicked($event)" :disabled="newEntryDisabled" :class="{ disabled: newEntryDisabled }"> Create New </button>
                    </form>
                </div>
                `
            });

            Vue.component('entry-item', {
                delimiters: ["[{","}]"],
                props: ['deleted','updating','updated'],
                data: function() {
                    return {
                        showOptions: false,
                    }
                },
                methods: {
                    deleteThisEntry: function(event){
                        this.$emit('deleteEntry');
                    },
                    toggleDropdown: function(event) {
                        var detailsDropdown = $(event.target).parents('.entry-item').children('.details-dropdown').first(); 
                        detailsDropdown.slideToggle();
                        this.showOptions = !this.showOptions;
                    }
                },
                template:
                `
                <div class="entry-item" v-if="!deleted">
                    
                    <span class="clickable edit-icon" @click="toggleDropdown($event)">
                        <span v-if="showOptions"><i class="fas fa-chevron-circle-up"></i></span>
                        <span v-else><i class="fas fa-chevron-circle-down"></i></span>
                    </span>

                    <slot name="display-section"></slot>
                    
                    <div class="details-dropdown" style="display:none"> 
                        
                        <div class="corner-update" v-bind:class="[{'update-appear':updating, 'update-fadeout':updated, 'invisible': !updating && !updated}]"><i class="far fa-save"></i> Updated</div>

                        <slot name="details-section"></slot>

                        <div class="details-buttons"> 
                            <slot name="details-buttons-section"></slot>
                                
                            <div class="details-buttons"> 
                                <div class="clickable details-button" @click="deleteThisEntry"> ❌ Delete Entry </div>
                            </div>

                        </div>
                    </div>
                </div>
                `
            })

            // Index
            Vue.component('module-button', {
                delimiters: ["[{","}]"],
                props: ['module'],
                data: function() { 
                    return { 
                        'background-color': ''
                    } 
                },
                mounted: function() { },
                computed: {
                    style() { return "background-color: " + this.module.background_color },
                    fontAwesomeClass() {  return 'fas fa-' + this.module.icon_font_awesome; },
                    url(){
                        return this.module.url_name;
                    }
                },
                template: 
                `
                <router-link v-bind:to="url">
                    <a class="button" :style="style" v-if="module.display">
                        <span class="button-icon"> 
                            <span v-if="module.icon_source == 'UN'"> 
                                [{ module.icon_unicode }]
                            </span>
                            <span v-if="module.icon_source == 'FA'"> 
                                <span :class="fontAwesomeClass"></span>
                            </span>
                        </span>
                        <span class="button-label"> [{ module.name }] </span>
                    </a>
                </router-link>`,
                methods: { }
            });
            indexComponent = Vue.component('index-page', {
                delimiters: ["[{","}]"],
                data: function() { 
                    return { 
                        modules: [],
                        todayEntries: {} 
                    } 
                },
                mounted: function() { this.getAllModules(); },
                methods: {
                    getAllModules: function() {
                        myAxios.get('modules')
                            .then(response => this.modules = response.data);
                    },
                    modulesForSection: function(section){
                        return this.modules.filter(m => m.category === section);
                    }
                },
                computed: {
                    sections: function(){
                        var sectionsSet = new Set(this.modules.map(m => m.category));
                        return Array.from(sectionsSet);
                    },
                },
                template:
                `
                <div id="index-component">
                    <div v-for="section in sections"> 

                        <h2>[{ section }]</h2>

                        <module-button v-for="module in modules" v-if="module.category === section"
                            v-bind:module="module"
                            v-bind:key="module.id"
                            v-bind:entered="todayEntries[module.name]">
                        </module-button>
                    </div>
                    
                </div>
                `
            });

            // Overview
            Vue.component('overview-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="item-body-element"> 
                            [{ entry.highlights }] 
                            <span class="item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5"  inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="review-text">
                            [{ entry.description }] 
                        </div>

                    </template>

                    <template slot="details-section">
                    
                        <label>Hightlights: <input type="text" v-model="entry.highlights" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Description: <textarea v-model="entry.description" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            overviewComponent = Vue.component('overview-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "overview", mandatoryFields: ['highlights', 'description'],} },
                template:
                `
                <div>
                    <h1>Overview</h1>

                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="overview-list" class="object-list">
                        <overview-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </overview-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Highlights: <input type="text" v-model="newEntry.highlights" /> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Description: <textarea v-model="newEntry.description" /> </textarea> </label>
                    </new-entry-form>

                </div>
                `
            })

            // Sleep
            Vue.component('sleep-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="item-body-element">
                            <b> [{ entry.start_time | formatTime }] - [{ entry.end_time | formatTime}] </b> ( [{ sleepDuration }] )
                        </div>
                        
                    </template>

                    <template slot="details-section">
                        
                        <label>Time Started: <input type="time" v-model="entry.start_time" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Time Ended: <input type="time" v-model="entry.end_time" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
                computed: {
                    sleepDuration: function(){
                        var duration = moment.utc(moment(this.entry.end_time,"HH:mm:ss").diff(moment(this.entry.start_time,"HH:mm:ss")))
                        return duration.format("H") + " hours, " + duration.format("m") + " minutes"
                    }
                }
            });
            sleepComponent = Vue.component('sleep-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "sleep", mandatoryFields: ['start_time', 'end_time'],} },
                template:
                `
                <div>
                    <h1>Sleep</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="sleep-list" class="object-list">
                        <sleep-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </sleep-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Time Started: <input type="time" v-model="newEntry.start_time" /> </label>
                        <label>Time Ended: <input type="time" v-model="newEntry.end_time" /> </label>
                    </new-entry-form>

                </div>
                `
            });

            // Weight
            Vue.component('weight-item', {
                mixins: [entryHandlingItemMixin],
                props: ['weight-types'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        <span class="weight-start item-top-detail"> [{ entry.start_time | formatTime }] - [{ entry.end_time | formatTime}] </span>
                        <span class="weight-weight item-top-detail"> [{ entry.weight }] lbs </span>
                        <span class="weight-reps item-top-detail"> [{ entry.reps }] reps </span>
                        <div class="weight-type item-body-element"> [{ getWeightTypeName(entry.type) }] </div>
                    </div>

                    <template slot="details-section">

                        <label>Weight: <input type="number" v-model="entry.weight" @blur="updateEntry" @input="inputChanged()" /> </label>

                        
                    </div>

                </entry-item>`,
                methods: {
                    getWeightTypeName: function(id){
                        return this.weightTypes.find(wt => wt.id === id).name;
                    }
                }
            });
            weightComponent = Vue.component('weight-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "weight", weightTypes: [], mandatoryFields: ['type', 'start_time', 'end_time', 'weight', 'reps'],} },
                computed: { sortedEntries: function(){ return _.orderBy(this.entries, ['start_time']); }, },
                methods: {
                    getAllWeightTypes: function() {
                        myAxios.get("weightTypes")
                            .then(response => this.weightTypes = response.data);
                    },
                },
                mounted: function() { this.getAllWeightTypes(); },
                template:
                `
                <div>
                    <h1>Weight Workouts</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="weight-list" class="object-list">
                        <weight-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :weight-types="weightTypes"
                        :endpoint="endpoint">
                        </weight-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label> Exercise: 
                            <select v-model="newEntry.type">
                                <option v-for="exercise in weightTypes" :value="exercise.id">
                                    [{ exercise.name }]
                                </option>
                            </select>
                        </label>

                        <label>Weight: <input type="number" v-model="newEntry.weight" /> </label>
                        <label>Reps: <input type="number" v-model="newEntry.reps" /> </label>
                        <label>Time Started: <input type="time" v-model="newEntry.start_time" /> </label>
                        <label>Time Ended: <input type="time" v-model="newEntry.end_time" /> </label>
                    </new-entry-form>

                    

                </div>
                `
            });
            
            // Cardio
            Vue.component('cardio-item', {
                mixins: [entryHandlingItemMixin],
                props: ['cardio-types'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        <span class="cardio-start item-top-detail"> [{ entry.start_time | formatTime }] - [{ entry.end_time | formatTime}] </span>
                        <span class="cardio-cardio item-top-detail"> [{ entry.calories_burned }] Cals </span>
                        <div class="cardio-type item-body-element"> [{ getCardioTypeName(entry.type) }] </div>
                    </template>

                    <template slot="details-section">

                        <label>Cardio: <input type="number" v-model="entry.cardio" @blur="updateEntry" @input="inputChanged()" /> </label>

                        
                        
                    </template>
                </entry-item>`,
                methods: {
                    getCardioTypeName: function(id){
                        return this.cardioTypes.find(ct => ct.id === id).name;
                    }
                }
            });
            cardioComponent = Vue.component('cardio-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "cardio", cardioTypes: [], mandatoryFields: ['start_time', 'end_time'],} },
                computed: { sortedEntries: function(){ return _.orderBy(this.entries, ['start_time']); }, },
                mounted: function() { this.getAllCardioTypes(); },
                methods: {
                    getAllCardioTypes: function() {
                        myAxios.get("cardioTypes")
                            .then(response => this.cardioTypes = response.data);
                    },
                },
                template:
                `
                <div>
                    <h1>Cardio Workouts</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="cardio-list" class="object-list">
                        <cardio-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :cardio-types="cardioTypes">
                        </cardio-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label> Exercise: 
                            <select v-model="newEntry.type">
                                <option v-for="exercise in cardioTypes" :value="exercise.id">
                                    [{ exercise.name }]
                                </option>
                            </select>
                        </label>
                        <label>Calories Burned: <input type="number" v-model="newEntry.calories_burned" /> </label>
                        <label>Time Started: <input type="time" v-model="newEntry.start_time" /> </label>
                        <label>Time Ended: <input type="time" v-model="newEntry.end_time" /> </label>
                    </new-entry-form>

                    
                </div>
                `
            });

            // Toilet
            Vue.component('toilet-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="item-body-element">
                            <b> [{ entry.start_time | formatTime }] - [{ entry.end_time | formatTime}] </b> 
                            <div> <b> Bristol: </b> <img v-bind:src="bristolImageSrc" v-if="entry.bristol < 8 && entry.bristol > 0 " class="bristol-image" /> </div>
                        </div>
                        
                    </template>

                    <template slot="details-section">
                        
                        <label>Time Started: <input type="time" v-model="entry.start_time" @blur="updateEntry" @input="inputChanged()"  /> </label>
                        <label>Time Ended: <input type="time" v-model="entry.end_time" @blur="updateEntry" @input="inputChanged()"  /> </label>
                        <label>Bristol: <input type="number" v-model="entry.bristol" min="1" max="7" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
                computed: {
                    bristolImageSrc: function() {
                        var imgName = "bristol" + this.entry.bristol + ".png";
                        return `{% static imgName %}` + imgName
                    }
                }
            });
            toiletComponent = Vue.component('toilet-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "toilet", mandatoryFields: ['start_time', 'end_time'],} },
                computed: {
                    bristolImageSrc: function() {
                        var imgName = "bristol" + this.newEntry.bristol + ".png";
                        return `{% static imgName %}` + imgName
                    },
                },
                template:
                `
                <div>
                    <h1>Bathroom</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="toilet-list" class="object-list">
                        <toilet-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </toilet-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                    
                        <label>Time Started: <input type="time" v-model="newEntry.start_time" /> </label>
                        <label>Time Ended: <input type="time" v-model="newEntry.end_time" /> </label>
                        <label>Bristol: <input type="number" v-model="newEntry.bristol" min="1" max="7" /> </label>
                        <img v-bind:src="bristolImageSrc" v-if="newEntry.bristol < 8 && newEntry.bristol > 0 " />
                    </new-entry-form>

                </div>
                `
            });

            // Sex
            Vue.component('sex-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="sex-name item-body-element"> [{ entry.type }] </div>

                    </template>

                    <template slot="details-section">

                        <label>Type: <input type="text" v-model="entry.type" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>
                </entry-item>`,
            });
            sexComponent = Vue.component('sex-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "sex", mandatoryFields: ['type'],} },
                template:
                `
                <div>
                    <h1>Sex</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="sex-list" class="object-list">
                        <sex-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </sex-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Type: <input type="text" v-model="newEntry.type" /> </label>
                        
                    </new-entry-form>

                </div>
                `
            });

            // Period
            Vue.component('period-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="period-name item-body-element"> 
                            <label>Period: <input type="checkbox" v-model="entry.period" @blur="updateEntry" @input="inputChanged()"> </label>
                        </div>

                    </template>

                </entry-item>`,
            });
            periodComponent = Vue.component('period-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "period", mandatoryFields: ['period'],} },
                template:
                `
                <div>
                    <h1>Period</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="period-list" class="object-list">
                        <period-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </period-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Period: <input type="checkbox" v-model="newEntry.period"> 
                        
                    </new-entry-form>

                </div>
                `
            });

            // Learning
            Vue.component('learning-item', {
                mixins: [entryHandlingItemMixin],
                props: ['tabindent'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="learning-name item-body-element"> <strong>[{ entry.summary }]</strong>
                        </div>
                        
                        <div class="learning-review review-text">[{ entry.details }]</div>

                    </template>

                    <template slot="details-section">
                        <label>Summary: <input type="text" v-model="entry.summary" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Review: <textarea v-model="entry.details" @blur="updateEntry" @input="inputChanged()" @keydown.tab="textAreaTab"> </textarea></label>

                    </template>

                </entry-item>`,
                methods: {
                    updateLearning: function() {
                        console.log(JSON.stringify(this.learning))
                        fetch(`http://localhost:8000/api/learning/${this.learning.id}`, {
                            method: 'PUT',
                            headers: {
                                'Accept': 'application/json, text/plain, */*',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.learning),
                        })
                        .then(
                            response => console.log(response),
                            () => console.log('OOPS')
                        );
                    },
                    deleteLearning: function() {
                        console.log(JSON.stringify(this.learning))
                        this.deleted = true;
                        fetch(`http://localhost:8000/api/learning/${this.learning.id}`, {
                            method: 'DELETE',
                            headers: {
                                'Accept': 'application/json, text/plain, */*',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.learning),
                        })
                        .then(function(response){
                            },
                            () => console.log('OOPS')
                        );
                    },
                    textAreaTab: function(event){
                        if (this.tabindent){
                            event.preventDefault();
                            caretLocation = event.target.selectionStart;
                            event.target.value = [event.target.value.slice(0, caretLocation), '    ', event.target.value.slice(caretLocation)].join('');
                            event.target.focus();
                            event.target.selectionEnd = caretLocation + 4;
                        }
                    }
                }
            });
            learningComponent = Vue.component('learning-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "learning", options: optionsStore, mandatoryFields: ['summary', 'details'],} },
                template:
                `
                <div>
                    <h1>Learning</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="learning-list" class="object-list">
                        <learning-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :tabindent="options.state.tabIndent">
                        </learning-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Summary: <input type="text" v-model="newEntry.summary" /> </label>
                        <label>Details: <textarea v-model="newEntry.details" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Money
            Vue.component('money-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">

                    <template slot="display-section">

                        <span class="money-amount" v-bind:class="[{negamoney: entry.amount > 0}]"> <b> $[{ entry.amount }] </b> </span>
                        <span class="money-name">[{ entry.name }] </span>
                        <span class="money-category item-top-detail" >[{ entry.category }] </span>

                    </template>

                    <template slot="details-section">

                        <label>Name:  <input v-model="entry.name" @blur="updateEntry" @input="inputChanged()"/>  </label>
                        <label>Amount: <input type="number" min="0.01" step="0.01" v-model="entry.amount" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Category: <input v-model="entry.category" @blur="updateEntry" @input="inputChanged()"/> </label>

                    </template>

                </entry-item>`,
            });
            moneyComponent = Vue.component('money-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "money", mandatoryFields: ['amount', 'name', 'category'],} },
                template:
                `
                <div>
                    <h1>Money</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="money-list" class="object-list">
                        <money-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </money-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                    
                        <label>Name:  <input v-model="newEntry.name"/>  </label>
                        <label>Amount: <input type="number" min="0.01" step="0.01" v-model="newEntry.amount" /> </label>
                        <label>Category: <input v-model="newEntry.category" /> </label>
                    </new-entry-form>

                </div>
                `
            });

            // Study
            Vue.component('study-item', {
                mixins: [entryHandlingItemMixin],
                props: ['quizzes'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <div class="study-type item-body-element"><b>[{ getQuiz(entry.quiz).name }]</b> [{entry.correct_records}] / [{ getQuiz(entry.quiz).total_records }] ([{correctPercent}]%) </div>

                    </template>

                    <template slot="details-section">

                        <label> Quiz: 
                            <select v-model="entry.quiz" >
                                <option v-for="quiz in quizzes" :value="quiz.id">
                                    [{ quiz.name }]
                                </option>
                            </select>
                        </label>
                        <label>Correct Records: <input type="number" v-model="entry.correct_records" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
                methods: {
                    getQuiz: function(id){
                        return this.quizzes.find(ct => ct.id === id);
                    }
                },
                computed: {
                    correctPercent: function(){
                        return Math.round((this.entry.correct_records / this.getQuiz(this.entry.quiz).total_records) * 100 * 10) / 10; 
                    }
                }
            });
            studyComponent = Vue.component('study-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "study", quizzes: [], mandatoryFields: [],} },
                computed: {
                    sortedEntries: function(){
                        var date = this.date;
                        return _.filter(this.entries, function(study){ return study.date === date; })
                    },
                },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                    this.getAllStudyTypes();
                },
                methods: {
                    getAllStudyTypes: function() {
                        myAxios.get("quizzes")
                            .then(response => this.quizzes = response.data )
                    },
                    correctPercent: function(study){
                        return Math.round((study.correct_records / this.getQuiz(study.quiz).total_records) * 100 * 10) / 10; 
                    },
                    getQuiz: function(id){
                        return this.quizzes.find(ct => ct.id === id);
                    }
                },
                template:
                `
                <div>
                    <h1>Study</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="study-list" class="object-list">
                        <study-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :quizzes="quizzes">
                        </study-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        
                        <label> Quiz: 
                            <select v-model="newEntry.quiz">
                                <option v-for="quiz in quizzes" :value="quiz.id">
                                    [{ quiz.name }]
                                </option>
                            </select>
                        </label>
                        <label>Correct Records: <input type="number" v-model="newEntry.correct_records" /> </label>
                    
                    </new-entry-form>


                    <div id="summary-table-container">
                        <table id="summary-table">
                            <thead>
                                <tr id="table-bottom-header">
                                    <td>Date</td>
                                    <td>Quiz</td>
                                    <td>Score</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="study in entries">
                                    <td> [{ study.date }] </td>
                                    <td> [{ getQuiz(study.quiz).name }] </td>
                                    <td> [{study.correct_records}] / [{ getQuiz(study.quiz).total_records }] <strong> ([{ correctPercent(study) }]%) </strong> </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    
                </div>
                `
            });

            // To-Do
            Vue.component('todo-item', {
                delimiters: ["[{","}]"],
                props: ['todo', 'pursuits', 'projects', 'date', 'draggable','tabindent'],
                data: function() {
                    return {
                        showOptions: false,
                        selected: '',
                        deleted: false,
                    }
                },
                template: 
                `<div class="todo-item" v-if="!deleted" 
                    v-bind:class="[
                        { 'task-waiting': todo.waiting_on, 
                        'task-completed': todo.status == 'CO' || todo.status == 'CA',
                        'draggable': draggable,
                        'low-priority': todo.priority === 1,
                        'medium-priority': todo.priority === 2,
                        'high-priority': todo.priority === 3,
                        }]">
                    
                    <span class="clickable edit-icon" v-on:click="toggleOptions">
                        <span v-if="showOptions"><i class="fas fa-chevron-circle-up"></i></span>
                        <span v-else><i class="fas fa-chevron-circle-down"></i></span>
                    </span>
                    
                    
                    <span class="pursuit" v-if="getPursuitFromLoaded(todo.pursuit)"> [{ getPursuitFromLoaded(todo.pursuit).icon }] </span>
                    <span class="clickable heavy-icon" v-on:click="toggleStatus">
                        <span v-if="todo.status === 'CO'"><i class="far fa-check-square"></i></span>
                        <span v-else-if="todo.status === 'CA'"><i class="fas fa-square"></i></span>
                        <span v-else><i class="far fa-square"></i></span>
                    </span> 
                    
                    <span class="blink negamoney" v-if="todo.start_time"> <span class="fas fa-circle"></span> </span>
                    <span class="todo-name"> [{ todo.name }] </span>
                    <span class="todo-project" v-if="todo.project"> [{ getProjectFromLoaded(todo.project).name }] </span> 

                    <span class="waiting-on" v-if="todo.due_date" v-bind:class="[{negamoney: todoPastDue}]">
                        (Due: [{ todo.due_date }])
                    </span>

                    <span class="waiting-on" v-if="todo.waiting_on">
                        (Waiting On... [{ todo.waiting_on }])
                    </span>
                    <div class="details-dropdown" v-bind:class="[{invisible: !showOptions}]"> 
                        <label> Task: 
                            <input v-model="todo.name" v-on:blur="updateToDo"/> 
                        </label>

                        <label> Pursuit: 
                            <select v-model="todo.pursuit" v-on:change="updateToDo">
                                <option v-for="pursuit in pursuits" :value="pursuit.id">
                                    [{ pursuit.icon }] [{ pursuit.name }]
                                </option>
                            </select>
                        </label>

                        <label> Project: 
                            <select v-model="todo.project" v-on:change="updateToDo">
                                <option v-for="project in projects" :value="project.id" v-if="!project.complete">
                                    [{ project.name }] 
                                </option>
                            </select>
                        </label>

                        <label> Waiting On: 
                            <input v-model="todo.waiting_on" v-on:blur="updateToDo"/> 
                        </label>

                        <label> Due: 
                            <input v-model="todo.due_date" type="date" v-on:blur="updateToDo"/> 
                        </label>

                        <label> Details: 
                            <textarea v-model="todo.details" v-on:blur="updateToDo" @keydown.tab="textAreaTab" /> 
                        </label>

                        <div class="priority" v-if="false">
                                <label> Priority </label>
                                <label class="inline-label"> <input type="radio" v-model="todo.priority" value=1 v-on:change="updateToDo"> High </label> 
                                <label class="inline-label"> <input type="radio" v-model="todo.priority" value=2 v-on:change="updateToDo"> Medium </label> 
                                <label class="inline-label"> <input type="radio" v-model="todo.priority" value=3 v-on:change="updateToDo"> Low </label>
                        </div>

                        <div> <label>Duration:</label> [{ todo.duration }] </div>
                        <span class="waiting-on" v-if="false"> Rank: [{todo.rank}] </span>

                        <div class="details-buttons"> 
                            <div class="clickable details-button" v-on:click="toggleStart" v-if="!todo.start_time"> <span class="fas fa-play"></span> Start Task </div>
                            <div class="clickable details-button" v-on:click="toggleStart" v-if="todo.start_time"> <span class="fas fa-pause"></span> Pause Task </div>
                            <div class="clickable details-button" v-on:click="toggleStatus('CA')"> <span class="fas fa-ban"></span> Cancel Task </div>
                            <div class="clickable details-button" v-on:click="deleteToDo"> <span class="fas fa-trash-alt"></span> Delete Task </div>
                        </div>
                    </div>
                </div>`,
                methods: {
                    toggleOptions: function() {
                        this.showOptions = !this.showOptions;
                    },
                    toggleStatus: function(newStatus) {
                        this.todo.status = this.todo.status != 'IN' ? 'IN' : 'CO';
                        if (newStatus === 'CA') { this.todo.status = 'CA'; }
                        if (this.todo.status != 'IN'){
                            newDate = new Date();
                            timeString = String(newDate.getHours()) + ':' + String(newDate.getMinutes()).padStart(2,'0');
                            this.todo.finish_time = moment(String(this.date) + " " + timeString);
                            this.todo.waiting_on = null;
                            this.showOptions = false;
                            if (!this.todo.start_time) { this.todo.start_time = moment(newDate); }
                            this.toggleStart();
                        }
                        else { this.todo.finish_time = null; }
                        this.updateToDo();
                    },
                    toggleStart: function() {
                        if (this.todo.start_time){
                            var new_duration = moment(new Date()) - moment(this.todo.start_time)
                            
                            if (!this.todo.duration) { this.todo.duration = new_duration; }
                            else { this.todo.duration = moment.duration(this.todo.duration) + moment.duration(new_duration); }
                            this.todo.duration = parseInt(this.todo.duration / 1000);

                            this.todo.start_time = null;
                            this.updateToDo();
                        }
                        else {
                            newDate = new Date();
                            timeString = String(newDate.getHours()) + ':' + String(newDate.getMinutes()).padStart(2,'0');
                            this.todo.start_time = moment(newDate);
                            this.updateToDo();
                        }
                    },
                    updateToDo: function() {
                        if (this.todo.due_date === "") { this.todo.due_date = null;}
                        myAxios.put("todo" + "/" + this.todo.id, this.todo)
                            .then(response => this.todo.duration = response.data.duration);
                    },
                    deleteToDo: function() {
                        this.deleted = true;
                        myAxios.delete("todo/" + this.todo.id);
                    },
                    getPursuitFromLoaded: function(id){ return this.pursuits.find(p => p.id === id); },
                    getProjectFromLoaded: function(id){ return this.projects.find(p => p.id === id); },
                    textAreaTab: function(event){
                        if (this.tabindent){
                            event.preventDefault();
                            caretLocation = event.target.selectionStart;
                            event.target.value = [event.target.value.slice(0, caretLocation), '    ', event.target.value.slice(caretLocation)].join('');
                            event.target.focus();
                            event.target.selectionEnd = caretLocation + 4;
                        }
                    }
                },
                computed: {
                    todoPastDue: function(){
                        console.log(moment(new Date()))
                        console.log(moment(this.todo.due_date))
                        var dateDiff = moment(this.todo.due_date) - moment(new Date());
                        return dateDiff < 0;
                    }
                }
            });
            Vue.component('pursuit', {
                delimiters: ["[{","}]"],
                props: ['pursuit'],
                template: 
                `<div class="pursuit">
                [{ pursuit.icon }] [{ pursuit.name }] 
                </div>`,
            });
            todoComponent = Vue.component('todo-page', {
                delimiters: ["[{","}]"],
                data: function() {
                    return {
                        date: dateToString(new Date()),
                        todos: [],
                        newTaskName: '',
                        newTaskPursuit: 1,
                        newTaskProject: null,
                        newPursuitName: '',
                        newPursuitIcon: '',
                        showNewTask: false,
                        pursuits: [],
                        showSettings: true,
                        hideComplete: false,
                        hideWaitingOn: false,
                        pursuitsForFilter: [],
                        pursuitFilter: null,
                        projects: [],
                        projectsForFilter: [],
                        projectFilter: null,
                        sortOn: 'rank',
                        options: optionsStore,
                    }
                },
                computed: {
                    sortedTasks: function(){
                        filteredTasks = this.todos;
                        if (this.pursuitFilter){ filteredTasks = filteredTasks.filter(todo => this.pursuitFilter === todo.pursuit) }
                        if (this.projectFilter){ filteredTasks = filteredTasks.filter(todo => this.projectFilter === todo.project) }
                        //if (this.hideComplete) { filteredTasks = filteredTasks.filter(todo => todo.status != 'CO') }
                        if (this.hideWaitingOn) { filteredTasks = filteredTasks.filter(todo => todo.waiting_on === "" || todo.waiting_on === null) }
                        return _.orderBy(filteredTasks, this.sortOrder , ['desc', 'asc']);
                    },
                    highestRank: function(){
                        if (this.todos.length) { return this.todos.reduce((a,b) => a.rank > b.rank ? a : b).rank }
                        else { return 1 }
                    },
                    sortOrder: function(){
                        if (this.sortOn == 'rank') { return ['status', /*'priority',*/ 'rank', 'pursuit']; }
                        else { return ['status', /*'priority',*/ 'pursuit', 'rank']; }
                    },
                    dragOptions: function(){
                        return {'disabled': (this.sortOn != 'rank' || this.options.state.disableDrag) };
                    },
                    firstMedium: function(){
                        return this.sortedTasks.find(todo => todo.priority == 2).id
                    },
                    completedTasks: function(){
                        return this.sortedTasks.filter(t => t.status === 'CO');
                    },
                    canceledTasks: function(){
                        return this.sortedTasks.filter(t => t.status === 'CA');
                    },
                    completedPercent: function(){
                        return Math.round((this.completedTasks.length / (this.sortedTasks.length - this.canceledTasks.length) ) * 100 * 10) / 10; 
                    },
                    newEntryDisabled: function(){ 
                        return this.newTaskName.length === 0;
                    }
                },
                mounted: function() {
                    this.getToDoPursuits();
                    this.getProjects();
                    this.getToDosByDate(dateToString(new Date()));
                },
                watch: {
                    date: function() {
                        this.getToDosByDate(dateToString(this.date));
                    }
                },
                methods: {
                    getToDosByDate: function(date) {
                        myAxios.get("todo/" + date)
                            .then(response => this.todos = response.data)
                    },
                    confirmNewTaskEntry: function(event) {
                        event.preventDefault();
                        var newTask = {
                            'name': this.newTaskName,
                            'pursuit': this.newTaskPursuit,
                            'project': this.newTaskProject,
                            'date': this.date,
                            'status': 'IN',
                            'rank': this.highestRank + 1
                        }
                        this.showNew = false;
                        this.newToDo(newTask);
                        return false;
                    },
                    newToDo: function(newTask) {
                        myAxios.post("todo", newTask)
                            .then(response => {
                                this.todos.push(response.data)
                                this.newTaskName = '';
                            });
                    },
                    getToDoPursuits: function(){
                        myAxios.get("pursuits")
                            .then(response => {
                                this.pursuits = response.data; 
                                this.pursuitsForFilter = response.data.slice(0);
                                this.pursuitsForFilter.unshift({icon:'All', name:''})
                                this.pursuitFilter = this.pursuitsForFilter[0]
                            });
                    },
                    getProjects: function(){
                        myAxios.get("projects")
                            .then(response => {
                                this.projects = response.data;
                                this.projects = response.data.slice(0);
                                this.projects.unshift({name:'N/A', id:null})
                            });
                    },
                    checkMove: function(evt) {
                        var rankAbove; var rankBelow; var newRank;

                        var taskAbove = this.sortedTasks[evt.newIndex-1];
                        var taskMoved = this.sortedTasks[evt.newIndex];
                        var taskBelow = this.sortedTasks[evt.newIndex+1];

                        // Handle if task is moved to the top
                        if (evt.newIndex == 0) { rankAbove = 0; }
                        else { rankAbove = this.sortedTasks[evt.newIndex-1].rank; }

                        // Handle if task is moved to the very bottom
                        if (evt.newIndex == this.todos.length - 1){ rankBelow = this.todos.length; }
                        else { rankBelow = this.sortedTasks[evt.newIndex+1].rank; }

                        // Handle if task is moved amongst completed tasks
                        if ((evt.newIndex != 0 && ['CO','CA'].indexOf(taskAbove.status) != -1) || ['CO','CA'].indexOf(taskBelow.status) != -1){ newRank = this.highestRank + 1; }
                        else { newRank = ((rankBelow + rankAbove) / 2.0); }
                        
                        taskMoved.rank = newRank;
                        evt.item.__vue__.updateToDo();
                        //var prevToDo = evt.item.previousSibling.__vue__.todo;
                        //var nextToDo = evt.item.nextSibling.__vue__.todo;
                        //var thisToDo = evt.item.__vue__.todo;
                        //console.log(prevToDo, thisToDo, nextToDo);
                    },
                },
                components: { vuejsDatepicker },
                template: 
                `
                <div>
                    <h1>To-Do</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>
                    <label class="inline-label">Completed Tasks: </label>[{ completedTasks.length }]/[{ sortedTasks.length - canceledTasks.length }] ([{ completedPercent }]%)
                    <div id="filters">
                        <h2>Filters</h2>
                        
                        <div>
                            <label class="inline-label"> Hide Complete
                                <input type="checkbox" v-model="hideComplete">
                            </label>

                            <label class="inline-label"> Hide Waiting On
                                <input type="checkbox" v-model="hideWaitingOn">
                            </label>
                        </div>

                        <div>
                            <label class="inline-label"> Pursuit: 
                                <select v-model="pursuitFilter">
                                    <option v-for="pursuit in pursuitsForFilter" :value="pursuit.id">
                                        [{ pursuit.icon }] [{ pursuit.name }]
                                    </option>
                                </select>
                            </label>
                            <label class="inline-label"> Project: 
                                <select v-model="projectFilter">
                                    <option v-for="project in projects" :value="project.id">
                                        [{ project.name }] 
                                    </option>
                                </select>
                            </label>
                        </div>

                        <div>
                            <label class="inline-label"> <input type="radio" v-model="sortOn" value="rank"> Rank </label>
                            <label class="inline-label">  <input type="radio" v-model="sortOn" value="pursuit"> Pursuit </label>
                        </div>
                    </div>

                    <draggable :list="sortedTasks" class="dragArea object-list" @end="checkMove" :options="dragOptions">
                        <todo-item v-for="item in sortedTasks"
                        :todo="item"
                        :key="item.id"
                        :pursuits="pursuits"
                        :projects="projects"
                        :date="date"
                        :draggable="!dragOptions.disabled"
                        :tabindent="options.state.tabIndent"
                        v-if="item.status != 'CO' || hideComplete === false">
                        </todo-item>
                    </draggable>
                        
                    <div id="newTask">
                        <form class="new-entry-form">
                            <input v-model="newTaskName" placeholder="Task"/> 
                            <label> Pursuit: 
                                <select v-model="newTaskPursuit">
                                    <option v-for="pursuit in pursuits" :value="pursuit.id">
                                        [{ pursuit.icon }] [{ pursuit.name }]
                                    </option>
                                </select>
                            </label>
                            <label> Project: 
                                <select v-model="newTaskProject">
                                    <option v-for="project in projects" :value="project.id" v-if="!project.complete">
                                        [{ project.name }]
                                    </option>
                                </select>
                            </label>
                            <button class="btn btn-primary" v-on:click="confirmNewTaskEntry($event)" :disabled="newEntryDisabled" :class="{ disabled: newEntryDisabled }"> Create New </button>
                        </form>
                    </div>

                    
                </div> 
                `
            });

            // Pursuit Progress
            Vue.component('pursuit-progress-item', {
                mixins: [entryHandlingItemMixin],
                props: ['pursuit', 'date',],
                mounted: function(){
                    this.entry['date'] = this.date;
                    this.entry.pursuit = this.pursuit.id
                },
                methods: {
                    makeOrUpdateEntry: function() {
                        if (this.entry.id) {
                            this.updateEntry(); 
                        }
                        else {
                            myAxios.post("pursuitprogress", this.entry)
                        }
                    }
                },
                template: 
                `<div class="pursuit-item item-main-body">
                    <span class="clickable edit-icon" v-on:click="showOptions = !showOptions"
                    style="float:left;">
                    <span>✎</span>
                    </span>
                    
                    <div class="pursuit-info ">
                        <span class="detail-column-25"> [{ pursuit.icon }] [{ pursuit.name }] </span>

                        <span class="pursuit-details-display" v-if="!showOptions">
                            [{ entry.description }] 
                        </span>

                        <textarea class="pursuit-details-entry" v-model="entry.description" v-on:blur="makeOrUpdateEntry" v-if="showOptions">
                        </textarea>
                    </div>
                    
                    </div>
                </div>`,
            });
            pursuitprogressComponent = Vue.component('pursuitprogress-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "pursuitprogress", pursuits: [],} },
                computed: {
                    sortedPursuitProgresss: function(){
                        return this.entries;
                    },
                    newEntryDisabled: function(){ 
                        if (!this.newEntry.title || this.newEntry.title.length === 0) { return true; }
                        if (!this.newEntry.author || this.newEntry.author.length === 0) { return true; }
                        if (!this.newEntry.type || this.newEntry.type.length === 0) { return true; }
                        if (!this.newEntry.up_to_page || this.newEntry.up_to_page.length === 0) { return true; }
                    } 
                },
                mounted: function() {
                    this.getAllPursuits();
                },
                methods: {
                    getAllPursuits: function(){
                        myAxios.get("pursuits")
                            .then(response => this.pursuits = response.data);
                    },
                    getPursuitProgressByPursuit: function(pursuit){
                        var found = this.entries.find(pp => pp.pursuit === pursuit)
                        if (!found) {
                            found = {'pursuit': null, 'description': null }
                        }
                        return found;
                    }
                },
                template:
                `
                <div>
                    <h1>Pursuit Progress</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="pursuit-list" class="object-list">
                        <pursuit-progress-item v-for="item in pursuits"
                        :entry="getPursuitProgressByPursuit(item.id)"
                        :pursuit="item"
                        :key="item.id"
                        :date="date"
                        :endpoint="endpoint">
                        </pursuit-progress-item>
                    </div>

                    
                </div>
                `
            });

            // Literature
            Vue.component('literature-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `
                <entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                
                    <template slot="display-section">
                    
                        <div class="literature-title item-body-element"> 
                            [{ entry.title }] 
                            <span class="literature-type item-top-detail"> [{ entry.type }] </span>
                            <span class="literature-title item-top-detail"> [{ entry.author }] </span>
                            <span class="literature-title item-top-detail"> <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="15" :increment="0.5" 
                                inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="literature-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>
                    
                    <template slot="details-section">

                        <label>Title: <input type="text" v-model="entry.title" @blur="updateEntry" @input="inputChanged()"  /> </label>
                        <label>Up To Page: <input type="number" v-model="entry.up_to_page" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Type: <input type="text" v-model="entry.type" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Author: <input type="text" v-model="entry.author" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>
                        
                </entry-item>
                `,
            });
            literatureComponent = Vue.component('literature-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "literature", mandatoryFields: ['title', 'author', 'type', 'up_to_page'], } },
                template:
                `
                <div>
                    <h1>Literature</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="literature-list" class="object-list">
                        <literature-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </literature-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title: <input type="text" v-model="newEntry.title" /> </label>
                        <label>Up To Page: <input type="number" v-model="newEntry.up_to_page" /> </label>
                        <label>Type: <input type="text" v-model="newEntry.type"/> </label>
                        <label>Author: <input type="text" v-model="newEntry.author"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>
                    </new-entry-form>
                    
                    
                </div>
                `
            });

            // Film
            Vue.component('film-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="film-title item-body-element"> [{ entry.title }] 
                        <span class="film-title item-top-detail"> [{ entry.director }] </span>
                        <span class="film-title item-top-detail"> <star-rating v-model="entry.rating"  :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="film-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Title: <input type="text" v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Director: <input type="text" v-model="entry.director" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            filmComponent = Vue.component('film-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "film", mandatoryFields: ['title', 'director'], } },
                template:
                `
                <div>
                    <h1>Films</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="film-list" class="object-list">
                        <film-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </film-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title: <input type="text" v-model="newEntry.title" /> </label>
                        <label>Director: <input type="text" v-model="newEntry.director"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                    

                </div>
                `
            });
            
            // Television
            Vue.component('television-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="television-series item-body-element"> [{ entry.series }] 
                        <span class="television-series item-top-detail"> [{ entry.episode }] </span>
                        <span class="television-series item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="television-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Series: <input type="text" v-model="entry.series" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Episode: <input type="text" v-model="entry.episode" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            televisionComponent = Vue.component('television-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "television", mandatoryFields: ['series', 'episode'],} },
                template:
                `
                <div>
                    <h1>Television</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="television-list" class="object-list">
                        <television-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </television-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Series: <input type="text" v-model="newEntry.series" /> </label>
                        <label>Episode: <input type="text" v-model="newEntry.episode"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Board Games
            Vue.component('boardgame-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="boardgame-title item-body-element"> [{ entry.title }] 
                        <span class="boardgame-title item-top-detail"> [{ entry.creator }] </span>
                        <span class="boardgame-title item-top-detail"> <star-rating v-model="entry.rating"  :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="boardgame-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Title: <input type="text" v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Creator: <input type="text" v-model="entry.creator" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            bgComponent = Vue.component('boardgame-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "boardgame", mandatoryFields: ['title', 'creator'],} },
                template:
                `
                <div>
                    <h1>Board Games</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="boardgame-list" class="object-list">
                        <boardgame-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </boardgame-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title: <input type="text" v-model="newEntry.title" /> </label>
                        <label>Creator: <input type="text" v-model="newEntry.creator"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                    
                </div>
            `
            });

            // Video Games
            Vue.component('videogame-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="videogame-title item-body-element"> 
                            [{ entry.title }] 
                            <span class="videogame-console item-top-detail"> [{ entry.console }] </span>
                            <span class="videogame-title item-top-detail"> [{ entry.developer }] </span>
                            <span class="videogame-title item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="videogame-review review-text">
                            [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Title: <input type="text" v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Console: <input type="text" v-model="entry.console" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Developer: <input type="text" v-model="entry.developer" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            vgComponent = Vue.component('videogame-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "videogame", mandatoryFields: ['title', 'console', 'developer'],} },
                template: 
                    `
                    <div id="videogame-page">

                        <h1>Video Games</h1>
                        <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                        <div id="videogame-list" class="object-list">
                        <videogame-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </videogame-item>
                        </div>

                        <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                            <label>Title: <input type="text" v-model="newEntry.title" /> </label>
                            <label>Console: <input type="text" v-model="newEntry.console"/> </label>
                            <label>Developer: <input type="text" v-model="newEntry.developer"/> </label>
                            <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                            <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                        </new-entry-form>

                    </div>
                    `
            });

            // Music
            Vue.component('music-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    
                    <template slot="display-section">
                        
                        <div class="music-title item-body-element"> [{ entry.title }] 
                        <span class="music-title item-top-detail"> [{ entry.artist }] </span>
                        <span class="music-title item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="music-review review-text">
                            [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Title: <input type="text" v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Artist: <input type="text" v-model="entry.artist" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>
                    
                </entry-item>`,
            });
            musicComponent = Vue.component('music-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "music", mandatoryFields: ['title', 'artist'],} },
                template:
                `
                <div>
                    <h1>Music</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="music-list" class="object-list">
                        <music-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </music-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title: <input type="text" v-model="newEntry.title" /> </label>
                        <label>Artist: <input type="text" v-model="newEntry.artist"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Podcast
            Vue.component('podcast-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    
                    <template slot="display-section">
                        
                        <div class="podcast-series item-body-element"> [{ entry.series }] 
                        <span class="podcast-series item-top-detail"> [{ entry.episode }] </span>
                        <span class="podcast-series item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="podcast-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Series: <input type="text" v-model="entry.series" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Episode: <input type="text" v-model="entry.episode" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            podcastComponent = Vue.component('podcast-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "podcast", mandatoryFields: ['series', 'episode'],} },
                template:
                `
                <div>
                    <h1>Podcasts</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="podcast-list" class="object-list">
                        <podcast-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </podcast-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Series: <input type="text" v-model="newEntry.series" /> </label>
                        <label>Episode: <input type="text" v-model="newEntry.episode"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Beer
            Vue.component('beer-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="beer-name item-body-element"> [{ entry.name }] 
                        <span class="beer-name item-top-detail"> [{ entry.brewery }] </span>
                        <span class="beer-name item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="beer-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input type="text" v-model="entry.name" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Brewery: <input type="text" v-model="entry.brewery" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            beerComponent = Vue.component('beer-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "beer", mandatoryFields: ['name', 'brewery'],} },
                template:
                `
                <div>
                    <h1>Beer</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="beer-list" class="object-list">
                        <beer-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </beer-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input type="text" v-model="newEntry.name" /> </label>
                        <label>Brewery: <input type="text" v-model="newEntry.brewery"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Wine
            Vue.component('wine-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="wine-name item-body-element"> [{ entry.name }] 
                        <span class="wine-name item-top-detail"> [{ entry.vineyard }] </span>
                        <span class="wine-name item-top-detail"> <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="wine-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input type="text" v-model="entry.name" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Vineyard: <input type="text" v-model="entry.vineyard" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            wineComponent = Vue.component('wine-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "wine", mandatoryFields: ['name', 'vineyard'],} },
                template:
                `
                <div>
                    <h1>Wine</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="wine-list" class="object-list">
                        <wine-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </wine-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input type="text" v-model="newEntry.name" /> </label>
                        <label>Vineyard: <input type="text" v-model="newEntry.vineyard"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });

            // Cheese
            Vue.component('cheese-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="cheese-name item-body-element"> [{ entry.name }] 
                        <span class="cheese-name item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="cheese-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input type="text" v-model="entry.name" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Vineyard: <input type="text" v-model="entry.vineyard" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
            });
            cheeseComponent = Vue.component('cheese-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "cheese", mandatoryFields: ['name'],} },
                template:
                `
                <div>
                    <h1>Cheese</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="cheese-list" class="object-list">
                        <cheese-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </cheese-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input type="text" v-model="newEntry.name" /> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                </div>
                `
            });
            
            // FilmWish
            Vue.component('filmwish', {
                mixins: [entryHandlingItemMixin],
                template: 
                `
                <entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">

                    <template slot="display-section">

                        <span >
                            <span> [{ entry.title }] </span>
                            <span>[{ entry.director }] </span>
                        </span>

                    </template>

                    <template slot="details-section">

                        <label> Title:  <input v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/>  </label>
                        <label> Director: <input v-model="entry.director" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </div>
                
                `,
            });
            filmwishComponent = Vue.component('filmwish-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "filmwish", noMixinMounted: true, mandatoryFields: ['title'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1> Movies To Watch </h1>
                    <div id="object-list">
                        <filmwish v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></filmwish>
                    
                        <button v-on:click="showNewEntry = !showNewEntry"> New FilmWish </button>
                    
                    </div>
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title <input v-model="newEntry.title" width=25% /> </label>
                        <label>Director <input v-model="newEntry.director" width=25% /> </label>
                    </new-entry-form>
                </div>
                `
            });
            
            // BoardGameWish
            Vue.component('boardgamewish', {
                mixins: [entryHandlingItemMixin],
                template: 
                `
                <entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span >
                            <span> [{ entry.title }] </span>
                            <span>[{ entry.creator }] </span>
                        </span>
                    
                    </template>

                    <template slot="details-section">

                        <label> Title:  <input v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/>  </label>
                        <label> Creator: <input v-model="entry.creator" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>
                </div>
                
                `,
            });
            boardgamewishComponent = Vue.component('boardgamewish-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "boardgamewish", noMixinMounted: true, mandatoryFields: ['title'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1> Board Games To Play </h1>
                    <div id="object-list">
                        <boardgamewish v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></boardgamewish>
                    
                        <button v-on:click="showNewEntry = !showNewEntry"> New BoardGameWish </button>
                    
                    </div>
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title <input v-model="newEntry.title" width=25% /> </label>
                        <label>Creator <input v-model="newEntry.director" width=25% /> </label>
                    </new-entry-form>
                </div>
                `
            });
            
            // LiteratureWish
            Vue.component('literaturewish', {
                mixins: [entryHandlingItemMixin],
                template: 
                `
                <entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span >
                            <span> [{ entry.title }] </span>
                            <span>[{ entry.author }] </span>
                        </span>

                    </template>

                    <template slot="details-section">

                        <label> Title:  <input v-model="entry.title" @blur="updateEntry" @input="inputChanged()"/>  </label>
                        <label> Author: <input v-model="entry.author" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </div>
                
                `,
            });
            literaturewishComponent = Vue.component('literaturewish-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "literaturewish", noMixinMounted: true, mandatoryFields: ['title'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1> Books To Read </h1>
                    <div id="object-list">
                        <literaturewish v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></literaturewish>
                    
                        <button v-on:click="showNewEntry = !showNewEntry"> New LiteratureWish </button>
                    
                    </div>
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Title <input v-model="newEntry.title" width=25% /> </label>
                        <label>Author <input v-model="newEntry.director" width=25% /> </label>
                    </new-entry-form>
                </div>
                `
            });
            
            // Cooking
            Vue.component('cooking-item', {
                mixins: [entryHandlingItemMixin],
                props: ['recipes'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <div class="cooking-name item-body-element"> [{ getRecipeFromLoaded(entry.recipe).name }] 
                        <span class="cooking-name item-top-detail"> <star-rating v-model="entry.rating" :star-size="15" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" :inline="true" :read-only="true" />  </span>
                        </div>
                        
                        <div class="cooking-review review-text">
                                [{ entry.review }] 
                        </div>

                    </template>

                    <template slot="details-section">

                        <label> Recipe: 
                            <select v-model="entry.recipe" @change="inputChanged(); updateEntry();">
                                <option v-for="recipe in recipes" :value="recipe.id">
                                    [{ recipe.name }]
                                </option>
                            </select>
                        </label>
                        <label class="inline-label">Rating: <star-rating v-model="entry.rating" @rating-selected="inputChanged(); updateEntry()" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="entry.review" @blur="updateEntry" @input="inputChanged()"> </textarea></label>

                    </template>

                </entry-item>`,
                methods: {getRecipeFromLoaded: function(id){ return this.recipes.find(p => p.id === id); }, }
            });
            cookingComponent = Vue.component('cooking-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "cooking", recipes: [], mandatoryFields: ['name'],} },
                mounted: function() { myAxios.get("recipes").then(response => this.recipes = convertRatings(response.data)); },
                methods: { getRecipeFromLoaded: function(id){ return this.recipes.find(p => p.id === id); }, },
                template:
                `
                <div>
                    <h1>Cooking</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="cooking-list" class="object-list">
                        <cooking-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :recipes="recipes">
                        </cooking-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label> Recipe: 
                            <select v-model="newEntry.recipe">
                                <option v-for="recipe in recipes" :value="recipe.id">
                                    [{ recipe.name }]
                                </option>
                            </select>
                        </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>
                        <label>Review: <textarea v-model="newEntry.review" /> </textarea> </label>

                    </new-entry-form>

                    
                </div>
                `
            });

            // Groceries
            Vue.component('grocerypurchase-item', {
                mixins: [entryHandlingItemMixin],
                props: ['fooditems'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span class="item-3-col"> <b> [{ (entry.price_per_unit - entry.discount_per_unit) * entry.qty | toCurrency}] </b> </span>
                        <span class="item-3-col"> 
                            <b> [{ entry.qty }]</b>
                            x [{ getFoodItemFromLoaded(entry.food_item).name }]  
                            ([{ getFoodItemFromLoaded(entry.food_item).serving_size_qty * entry.serving_count }] 
                            [{ getFoodItemFromLoaded(entry.food_item).serving_size_unit }])
                        </span>
                        <span class="item-top-detail"> [{ entry.store }] </span>

                    </template>

                    <template slot="details-section">

                        <label> Item: 
                            <select v-model="entry.food_item" @change="inputChanged(); updateEntry();">
                                <option v-for="fooditem in fooditems" :value="fooditem.id">
                                    [{ fooditem.name }]
                                </option>
                            </select>
                        </label>
                        
                        <label>Servings per Unit: <input v-model="entry.serving_count" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Unit Price: <input v-model="entry.price_per_unit" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Unit Discount: <input v-model="entry.discount_per_unit" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Unit Quantity: <input v-model="entry.qty" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <br>
                        <label>Store: <input v-model="entry.store" @blur="updateEntry" @input="inputChanged()" /> </label>
                        <label>Receipt Name: <input v-model="entry.receipt_name" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
                methods: { getFoodItemFromLoaded: function(id){ return this.fooditems.find(p => p.id === id); },
                }
            });
            groceriesComponent = Vue.component('groceries-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "grocerypurchase",  fooditems: [], barcode: "", mandatoryFields: ['price_per_unit', 'qty'], } },
                mounted: function() { myAxios.get("foodItems").then(response => this.fooditems = convertRatings(response.data)); },
                watch: {
                    barcode: function() {
                        var foundFood = this.findFoodItemWithBarcode(this.barcode);
                        if (foundFood){ this.newGroceryPurchaseEntry.food_item = foundFood.id; }
                    }
                },
                methods: {
                    getFoodItemFromLoaded: function(id){
                        return this.fooditems.find(p => p.id === id);
                    },
                    findFoodItemWithBarcode: function(barcode){
                        return this.fooditems.find(p => p.barcode === barcode)
                    }
                },
                template:
                `
                <div>
                    <h1>Groceries</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="grocerypurchase-list" class="object-list">
                        <grocerypurchase-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :fooditems="fooditems">
                        </grocerypurchase-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label> Item: 
                            <select v-model="newEntry.food_item">
                                <option v-for="fooditem in fooditems" :value="fooditem.id">
                                    [{ fooditem.name }] ([{ fooditem.serving_size_qty }] [{ fooditem.serving_size_unit }])
                                </option>
                            </select>
                        </label>
                        
                        <label>Servings Per Unit: <input v-model="newEntry.serving_count" /> </label>
                        <label>Unit Price: <input v-model="newEntry.price_per_unit" /> </label>
                        <label>Unit Discount: <input v-model="newEntry.discount_per_unit" /> </label>
                        <label>Unit Quantity: <input v-model="newEntry.qty" /> </label>
                        <br>
                        <label>Barcode: <input v-model="barcode" /> </label>
                        <label>Store: <input v-model="newEntry.store" /> </label>
                        <label>Receipt Name: <input v-model="newEntry.receipt_name" /> </label>

                    </new-entry-form>

                    
                </div>
                `
            });

            // Meals
            Vue.component('meal-item', {
                mixins: [entryHandlingItemMixin],
                props: ['fooditems','recipes'],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span class="item-top-detail">⏰ [{ entry.eat_time | formatTime }] </span>
                        <span class="item-top-detail">[{ entry.calories }] Cal</span>
                        <span class="item-top-detail">$[{ entry.cost }] </span>
                        <span class="item-top-detail">[{ entry.rating }] ★</span>
                        <span class="item-top-detail">[{ entry.location }] </span>
                        <div class="item-main-body">
                            <ul>
                                <li v-for="food in entry.foods"> [{ getFoodItemFromLoaded(food).name }] </li>
                                <li v-for="recipe in entry.recipes"> [{ getRecipeFromLoaded(recipe).name }] </li>
                            </ul>
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Cost: <input type="number" min="0.01" step="0.01" v-model="entry.cost" /> </label>
                        <label>Time Ate: <input type="time" v-model="entry.eat_time" /> </label>
                        <label>Location: <input v-model="entry.location" /> </label>

                    </template>

                </entry-item>`,
                methods: {
                    getFoodItemFromLoaded: function(id){
                        return this.fooditems.find(p => p.id === id);
                    },
                    getRecipeFromLoaded: function(id){
                        return this.recipes.find(p => p.id === id);
                    },
                }
            });
            mealsComponent = Vue.component('meals-page', {
                mixins: [entryHandlingPageMixin],
                data: function() {
                    return {
                        newEntry: {
                            recipes: [],
                            foods: []
                        },
                        endpoint: "meal",
                        recipes: [],
                        fooditems: [],
                        newMealFoodItem: {},
                        newMealRecipe: {},
                        mandatoryFields: ['eat_time', 'location', 'cost'],
                    }
                },
                mounted: function() {
                    myAxios.get("recipes").then(response => this.recipes = convertRatings(response.data));
                    myAxios.get("foodItems").then(response => this.fooditems = convertRatings(response.data));
                },
                methods: {
                    getLabel: function(item){ return item.name },
                    addNewMealFoodItem: function() { 
                        console.log("add food");
                        this.newEntry.foods.push(this.newMealFoodItem); 
                    },
                    addNewMealRecipe: function() { 
                        this.newEntry.recipes.push(this.newMealRecipe); 
                    },
                    getFoodItemFromLoaded: function(id){ return this.fooditems.find(p => p.id === id); },
                    getRecipeFromLoaded: function(id){ return this.recipes.find(p => p.id === id); },
                },
                template:
                `
                <div>
                    <h1>Meals</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="meal-list" class="object-list">
                        <meal-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        v-bind:recipes="recipes"
                        v-bind:fooditems="fooditems">
                        </meal-item>
                    </div>
                    
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">

                        <div v-for="fooditem in newEntry.foods">
                            <span> [{ getFoodItemFromLoaded(fooditem).name }] </span>
                        </div>
                        <div v-for="recipe in newEntry.recipes">
                            <span> [{ getRecipeFromLoaded(recipe).name }] </span>
                        </div>
                        
                        <div>
                            <label> Food: 
                                <select v-model="newMealFoodItem">
                                    <option v-for="fooditem in fooditems" :value="fooditem.id">
                                        [{ fooditem.name }] ([{ fooditem.serving_size_qty }] [{ fooditem.serving_size_unit }])
                                    </option>
                                </select>
                                <button v-on:click="addNewMealFoodItem"> + Food </button>
                            </label>
                        </div>

                        <div>
                            <label> Recipe: 
                                <select v-model="newMealRecipe">
                                    <option v-for="recipe in recipes" :value="recipe.id">
                                        [{ recipe.name }]
                                    </option>
                                </select>
                                <button v-on:click="addNewMealRecipe"> + Recipe </button>
                            </label>
                        </div>

                        <label>Cost: <input type="number" v-model="newEntry.cost" /> </label>
                        <label>Time Ate: <input type="time" v-model="newEntry.eat_time" /> </label>
                        <label>Location: <input v-model="newEntry.location" /> </label>
                        <label class="inline-label">Rating: <star-rating v-model="newEntry.rating" :star-size="25" :increment="0.5" 
                            inactive-color="#b7b7b7" active-color="#232323" :show-rating="false" /> </label>

                    </new-entry-form>

                    
                </div>
                `
            });

            // Travel
            Vue.component('travel-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">
                        
                        <div class="travel-name item-body-element"> [{ entry.name }] 
                            <span class="travel-type item-top-detail"> [{ entry.location_type }] </span>
                            <span class="travel-lat item-top-detail"> [{ entry.latitude }] </span>
                            <span class="travel-long item-top-detail"> [{ entry.longitude }] </span>
                        </div>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input type="text" v-model="entry.name" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Location Type: <input type="text" v-model="entry.location_type" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Latitude: <input type="text" v-model="entry.latitude" @blur="updateEntry" @input="inputChanged()"/> </label>
                        <label>Longitude: <input type="text" v-model="entry.longitude" @blur="updateEntry" @input="inputChanged()"/> </label>

                    </template>

                </entry-item>`,
            });
            travelComponent = Vue.component('travel-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "travel", mapMarkers: [], mandatoryFields: ['name', 'location_type', 'latitude', 'longitude'], }},
                mounted: function() { this.loadGoogleMap(); },
                methods: {
                    loadGoogleMap: function() {
                        var script = document.createElement('script');
                        script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyDctazL-k5ESKdrrtFn7TBRzy0YOkbb96o&callback=initMap';
                        var travelsection = document.getElementById("travel-section");
                        travelsection.appendChild(script);
                    },
                    plotTravels: function() {
                        // Erase markers
                        this.mapMarkers.forEach(marker => {
                            marker.setMap(null);
                            marker = null;
                        });
                        this.mapMarkers = [];

                        // Plot markers on map
                        this.entries.forEach(travel => {
                            console.log(JSON.stringify(travel));
                            console.log(map);
                            let coords = {lat: parseFloat(travel.latitude), lng: parseFloat(travel.longitude)};
                            this.mapMarkers.push(new google.maps.Marker({position: coords, map: map}));
                        });
                    }
                },
                template:
                `
                <div id="travel-section">
                    <h1>Travel</h1>
                    <label> Date: </label><vuejs-datepicker v-model="date" wrapper-class="datepicker-wrapper" calendar-class="datepicker-calendar" input-class="datepicker-wrapper" @selected=""></vuejs-datepicker>

                    <div id="travel-list" class="object-list">
                        <travel-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </travel-item>
                    </div>
                    

                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                    
                        <label>Name: <input type="text" v-model="newEntry.name" /> </label>
                        <label>Location Type: <input type="text" v-model="newEntry.location_type"/> </label>
                        <label>Latitude: <input type="text" v-model="newEntry.latitude" /> </label>
                        <label>Longitude: <input type="text" v-model="newEntry.longitude" /> </label>

                    </new-entry-form>

                    <div id="map"></div>
                </div>
                `
            });

            // Modules
            Vue.component('module', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<div class="module-item">
                    <span class="clickable edit-icon" v-on:click="showOptions = !showOptions" style="float:left;">
                        <span v-if="showOptions">▴</span>
                        <span v-else>✎</span>
                    </span>
                    
                    <span class="project-info">
                        <div class="project-header"> 
                                <input type="checkbox" v-model="entry.display" v-on:change="updateEntry"><span class="project-name"> [{ entry.name }] </span> 
                        </div>
                    </span>

                    <div class="details-dropdown" v-bind:class="[{invisible: !showOptions}]"> 
                        <label>Section: <input v-model="entry.category" v-on:blur="updateEntry" /> </label>
                        <label>Color: <input v-model="entry.background_color" v-on:blur="updateEntry" /> </label>
                        <label>Color (Complete): <input v-model="entry.background_color_complete" v-on:blur="updateEntry" /> </label>
                        <label class="inline-label"> <input type="radio" v-model="entry.icon_source" value="UN" v-on:change="updateEntry"> Unicode </label> <input v-model="entry.icon_unicode" v-on:blur="updateEntry" size="3"/>
                        <br>
                        <label class="inline-label">  <input type="radio" v-model="entry.icon_source" value="FA" v-on:change="updateEntry"> FontAwesome </label> <input v-model="entry.icon_font_awesome" v-on:blur="updateEntry" /> 
                    </div>
                </div>`,
            });
            moduleComponent = Vue.component('module-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "modules", noMixinMounted: true, } },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div id="app">
                    <div id="module-list" class="object-list">
                        <module v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></module>
                    </div>
                </div>
                `
            });

            // Projects
            Vue.component('project', {
                mixins: [entryHandlingItemMixin],
                props: ['pursuits'],
                template: 
                `<div class="project-item">
                    <span class="clickable edit-icon" v-on:click="showOptions = !showOptions" style="float:left;">
                        <span v-if="showOptions">▴</span>
                        <span v-else>✎</span>
                    </span>
                    
                    <span class="project-info">
                        <div class="project-header"> 
                            <span class="project-name"> [{ entry.name }] </span> 
                            <span v-if="entry.pursuit && pursuits[entry.pursuit-1]" class="project-pursuit">  ([{ pursuits[entry.pursuit-1].icon }] [{ pursuits[entry.pursuit-1].name }])  </span>
                        </div> 
                        
                        <span class="project-description">[{ entry.description }] </span>
                    </span>

                    <div class="details-dropdown" v-bind:class="[{invisible: !showOptions}]"> 
                        <label>Name: <input v-model="entry.name" v-on:blur="updateEntry" /> </label>
                        <textarea v-model="entry.description" v-on:blur="updateEntry"></textarea>
                        <label> Pursuit: 
                            <select v-model="entry.pursuit" v-on:change="updateEntry">
                                <option v-for="pursuit in pursuits" :value="pursuit.id">
                                    [{ pursuit.icon }] <!-- [{ pursuit.name }] -->
                                </option>
                            </select>
                        </label>
                        <label> <input type="checkbox" v-model="entry.complete" v-on:change="updateEntry"> Complete </label>
                    </div>
                </div>`,
                methods: {
                    updateProject: function() {
                        console.log(JSON.stringify(this.project))
                        fetch(`http://localhost:8000/api/project/${this.project.id}`, {
                            method: 'PUT',
                            headers: {
                                'Accept': 'application/json, text/plain, */*',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.project),
                        })
                        .then(
                            response => console.log(response),
                            () => console.log('OOPS')
                        );
                    },
                }
            });
            projectComponent = Vue.component('project-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "projects", noMixinMounted: true, pursuits: [], mandatoryFields: ['name', 'description'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                    myAxios.get("pursuits").then(response => this.pursuits = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <div id="object-list" class="object-list">
                        <project v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :pursuits="pursuits"></project>
                    
                    
                    </div>
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name <input v-model="newEntry.name" width=25% /> </label>
                        <label>Description <textarea v-model="newEntry.description"></textarea> </label>
                    </new-entry-form>
                    
                    
                </div>
                `
            });

            // Quizzes
            Vue.component('quiz', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<div class="quiz">
                    <span class="quiz-name"><b>[{ entry.name }]</b></span>
                    <span class="quiz-url"><a :href="entry.url">[{ entry.url }]</a></span>
                    <span class="quiz-records">[{ entry.total_records }] records</span>
                </div>`,
            });
            quizComponent = Vue.component('quiz-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "quizzes", noMixinMounted: true, mandatoryFields: ['name', 'url', 'total_records'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <div id="object-list">
                        <quiz v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></quiz>
                    
                    
                    </div>
                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name <input v-model="newEntry.name" width=25% /> </label>
                        <label>URL <input v-model="newEntry.url"></input> </label>
                        <label>Total Records <input v-model="newEntry.total_records"></input> </label>
                    </new-entry-form>
                </div>
                `
            });

            // Pursuits
            Vue.component('pursuit-item', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span class="pursuit-info">
                            <span class="pursuit-icon"> [{ entry.icon }] </span>
                            <span class="pursuit-name">[{ entry.name }] </span>
                        </span>

                    </template>

                    <template slot="details-section">

                        <label> Icon:  <input v-model="entry.icon" @blur="updateEntry" @input="inputChanged()"/>  </label>
                        <label>Name: <input v-model="entry.name" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
                methods: {
                    updatePursuit: function() {
                        fetch(`http://localhost:8000/api/pursuit/${this.pursuit.id}`, {
                            method: 'PUT',
                            headers: {
                                'Accept': 'application/json, text/plain, */*',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.pursuit),
                        })
                        .then(
                            response => console.log(response),
                            () => console.log('OOPS')
                        );
                    },
                    deletePursuit: function() {
                        this.deleted = true;
                        fetch(`http://localhost:8000/api/pursuit/${this.pursuit.id}`, {
                            method: 'DELETE',
                            headers: {
                                'Accept': 'application/json, text/plain, */*',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(this.pursuit),
                        })
                        .then(function(response){
                            },
                            () => console.log('OOPS')
                        );
                    },
                }
            });
            pursuitComponent = Vue.component('pursuit-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "pursuits", noMixinMounted: true, mandatoryFields: ['name', 'icon'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1>Pursuits</h1>

                    <div id="pursuit-list" class="object-list">
                        <pursuit-item v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </pursuit-item>
                    </div>

                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Icon: <input v-model="newEntry.icon" /> </label>
                        <label>Name: <input v-model="newEntry.name" /> </label>
                    </new-entry-form>

                </div>
                `
            });

            // CardioExercises
            Vue.component('cardioexercise', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">

                    <template slot="display-section">

                        <span class="cardioType-info">
                            <span class="cardioType-name">[{ entry.name }] </span>
                        </span>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input v-model="entry.name" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
            });
            cardioexerciseComponent = Vue.component('cardioexercise-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "cardioTypes", noMixinMounted: true, mandatoryFields: ['name'], } },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1>Cardio Exercises</h1>

                    <div id="cardioType-list" class="object-list">
                        <cardioexercise v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </cardioexercise>
                    </div>

                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input v-model="newEntry.name" /> </label>
                    </new-entry-form>

                </div>
                `
            });

            // WeightExercises
            Vue.component('weightexercise', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<entry-item :deleted="deleted" :updating="updating" :updated="updated" @deleteEntry="deleteEntry">
                    
                    <template slot="display-section">

                        <span class="weightType-info">
                            <span class="weightType-name">[{ entry.name }] </span>
                        </span>

                    </template>

                    <template slot="details-section">

                        <label>Name: <input v-model="entry.name" @blur="updateEntry" @input="inputChanged()" /> </label>

                    </template>

                </entry-item>`,
            });
            weightexerciseComponent = Vue.component('weightexercise-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "weightTypes", noMixinMounted: true, mandatoryFields: ['name'], } },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <h1>Weight Exercises</h1>

                    <div id="weightType-list" class="object-list">
                        <weightexercise v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint">
                        </weightexercise>
                    </div>

                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input v-model="newEntry.name" /> </label>
                    </new-entry-form>

                </div>
                `
            });

            // FoodItems
            Vue.component('fooditem', {
                mixins: [entryHandlingItemMixin],
                template: 
                `<div class="fooditem" v-if="!deleted">
                    <span class="clickable edit-icon" v-on:click="showOptions = !showOptions">
                        <span class=""">
                            <span v-if="showOptions">▴</span>
                            <span v-else>✎</span>
                        </span>
                        
                        <span class="fooditem-info">
                            <span class="fooditem-header"> 
                                <span class="fooditem-name"> [{ entry.name }] </span> 
                            </span> 
                        </span>
                    </span>

                    <div class="details-dropdown" v-bind:class="[{invisible: !showOptions}]"> 
                        <label>Name: <input v-model="entry.name" v-on:blur="updateEntry" /> </label>
                        <label>Barcode: <input v-model="entry.barcode" v-on:blur="updateEntry" /> </label>
                        <div class="nutrition-label">
                            <h1> Nutrition Facts </h1>
                            <div> <b> Serving size </b> 
                                <!--<input v-model="entry.serving_size" v-on:blur="updateEntry" class="wider-input" />-->
                                <input placeholder="0" v-model="entry.serving_size_qty" v-on:blur="updateEntry" class="input" />
                                <input placeholder="grams" v-model="entry.serving_size_unit" v-on:blur="updateEntry" class="wider-input" />
                            </div>
                            <div class="divider-large"></div>
                            <div> <b>Calories</b> <input v-model="entry.calories" v-on:blur="updateEntry" /> </div>
                            <div class="divider-small"></div>
                            <div style="text-align:right;font-size:0.8em;"> <b> % Daily Value* </b> </div>
                            <div class="nutrition-line"> <b>Total Fat</b> <input v-model="entry.total_fat" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-subline"> <i>Saturated</i> Fat <input v-model="entry.saturated_fat" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-subline"> <i>Trans</i> Fat <input v-model="entry.trans_fat" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-line"> <b>Cholesterol</b> <input v-model="entry.cholesterol" v-on:blur="updateEntry" />mg </div>
                            <div class="nutrition-line"> <b>Sodium</b> <input v-model="entry.sodium" v-on:blur="updateEntry" />mg </div>
                            <div class="nutrition-line"> <b>Total Carbohydrate</b> <input v-model="entry.total_carbs" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-subline"> Dietary Fiber <input v-model="entry.dietary_fiber" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-subline"> Total Sugars <input v-model="entry.total_sugars" v-on:blur="updateEntry" />g </div>
                            <div class="nutrition-subsubline"> Includes <input v-model="entry.added_sugars" v-on:blur="updateEntry" />g Added Sugars </div>
                            <div class="nutrition-line"> <b>Protein</b> <input v-model="entry.protein" v-on:blur="updateEntry" />g </div>
                            <div class="divider-large"></div>
                            <div class="nutrition-line"> Vitamin D <input v-model="entry.vitamin_d" v-on:blur="updateEntry" />mcg </div>
                            <div class="nutrition-line"> Calcium <input v-model="entry.calcium" v-on:blur="updateEntry" />mg </div>
                            <div class="nutrition-line"> Iron <input v-model="entry.iron" v-on:blur="updateEntry" />mg </div>
                            <div class="nutrition-line"> Potassium <input v-model="entry.potassium" v-on:blur="updateEntry" />mg </div>
                            <div class="divider-small"></div>
                            <div class="nutrition-notes">* The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. 2,000 calories a day is used for general nutrition advice.</div>
                        </div>

                        <div class="details-buttons"> 
                            <div class="clickable details-button" v-on:click="deleteEntry"> <span class="fas fa-trash-alt"></span> Delete Food Item </div>
                        </div>
                    </div>
                </div>`,
            });
            fooditemComponent = Vue.component('fooditem-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "foodItems", noMixinMounted: true, mandatoryFields: ['name', 'serving_size_unit'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                },
                template:
                `
                <div>
                    <div id="object-list" class="object-list-flex">
                        <fooditem v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"></fooditem>
                    
                    </div>

                    <button v-on:click="showNewEntry = !showNewEntry"> New FoodItem </button>
                    <div id="newFoodItem" v-if="showNewEntry">
                        <label>Name: <input v-model="newEntry.name" /> </label>
                        <div class="nutrition-label">
                            <h1> Nutrition Facts </h1>
                            <div> <b> Serving size </b> 
                                <input placeholder="0" v-model="newEntry.serving_size_qty" class="input" />
                                <input placeholder="grams" v-model="newEntry.serving_size_unit" class="wider-input" />
                            </div>
                            <div class="divider-large"></div>
                            <div> <b>Calories</b> <input v-model="newEntry.calories" /> </div>
                            <div class="divider-small"></div>
                            <div style="text-align:right;font-size:0.8em;"> <b> % Daily Value* </b> </div>
                            <div class="nutrition-line"> <b>Total Fat</b> <input v-model="newEntry.total_fat" />g </div>
                            <div class="nutrition-subline"> <i>Saturated</i> Fat <input v-model="newEntry.saturated_fat" />g </div>
                            <div class="nutrition-subline"> <i>Trans</i> Fat <input v-model="newEntry.trans_fat" />g </div>
                            <div class="nutrition-line"> <b>Cholesterol</b> <input v-model="newEntry.cholesterol" />mg </div>
                            <div class="nutrition-line"> <b>Sodium</b> <input v-model="newEntry.sodium" />mg </div>
                            <div class="nutrition-line"> <b>Total Carbohydrate</b> <input v-model="newEntry.total_carbs" />g </div>
                            <div class="nutrition-subline"> Dietary Fiber <input v-model="newEntry.dietary_fiber" />g </div>
                            <div class="nutrition-subline"> Total Sugars <input v-model="newEntry.total_sugars" />g </div>
                            <div class="nutrition-subsubline"> Includes <input v-model="newEntry.added_sugars" />g Added Sugars </div>
                            <div class="nutrition-line"> <b>Protein</b> <input v-model="newEntry.protein" />g </div>
                            <div class="divider-large"></div>
                            <div class="nutrition-line"> Vitamin D <input v-model="newEntry.vitamin_d" />mcg </div>
                            <div class="nutrition-line"> Calcium <input v-model="newEntry.calcium" />mg </div>
                            <div class="nutrition-line"> Iron <input v-model="newEntry.iron" />mg </div>
                            <div class="nutrition-line"> Potassium <input v-model="newEntry.potassium" />mg </div>
                            <div class="divider-small"></div>
                            <div class="nutrition-notes">* The % Daily Value (DV) tells you how much a nutrient in a serving of food contributes to a daily diet. 2,000 calories a day is used for general nutrition advice.</div>
                        </div>
                        <button v-on:click="createNewEntry"> Save </button>
                    </div>
                </div>
                `
            });

            // Recipes
            Vue.component('recipeingredient', {
                delimiters: ["[{","}]"],
                props: ['ingredient','fooditem','recipe'],
                data: function() {
                    return {
                        deleted: false,
                    }
                },
                template:
                `
                    <div v-if="!deleted && fooditem"> <b>[{ ingredient.item_qty * fooditem.serving_size_qty }] [{ fooditem.serving_size_unit }]</b> <span v-if="fooditem"> [{ fooditem.name }] </span> <span class="clickable" v-on:click="deleteIngredient"> <span class="fas fa-trash-alt"></span> </span> </div>
                `,
                methods: {
                    deleteIngredient: function() {
                        this.deleted = true;
                        myAxios.delete('recipeingredients/' + this.ingredient.id);
                    },
                }
            });
            Vue.component('recipe', {
                mixins: [entryHandlingItemMixin],
                props: ['fooditems'],
                data: function() {
                    return {
                        showOptions: false,
                        showNewIngredient: false,
                        newIngredientEntry: {},
                        newRecipeIngredientEntry: {},
                    }
                },
                template: 
                `<div class="recipe-item">
                    <span class="clickable edit-icon" v-on:click="showOptions = !showOptions">
                        <span v-if="showOptions">▴</span>
                        <span v-else>✎</span>
                    </span>
                    
                    <span class="recipe-info">
                        <span class="recipe-name"> [{ entry.name }] </span> 
                    </span>

                    <div class="details-dropdown" v-bind:class="[{invisible: !showOptions}]"> 
                        <label>Name: <input v-model="entry.name" v-on:blur="updateEntry" /> </label>
                        <label>Instructions: <textarea v-model="entry.details" v-on:blur="updateEntry" /> </label>
                        <h2> Ingredients </h2>
                        <div v-for="ingredient in entry.ingredients">
                            <recipeingredient :ingredient="ingredient" :fooditem="getFoodItemFromLoaded(ingredient.food_item)" :recipe="entry"> </recipeingredient> 
                        </div>
                        
                        <button v-on:click="showNewIngredient = !showNewIngredient"> Add Ingredient </button>
                        <div id="newIngredient" v-if="showNewIngredient">
                            <label> Select Item: 
                                <select v-model="newIngredientEntry">
                                    <option v-for="fooditem in fooditems" :value="fooditem">
                                        [{ fooditem.name }] ([{ fooditem.serving_size_qty }] [{ fooditem.serving_size_unit }])
                                    </option>
                                </select>
                            </label>
                            <label>Qty <input v-model="newRecipeIngredientEntry.item_qty" width=25% /> </label>
                            <button v-on:click="addIngredient"> Save </button>
                        </div>
                    </div>
                </div>`,
                methods: {
                    getFoodItemFromLoaded: function(id){
                        return this.fooditems.find(p => p.id === id);
                    },
                    addIngredient: function() {
                        this.newRecipeIngredientEntry.food_item = this.newIngredientEntry.id;
                        this.newRecipeIngredientEntry.recipe = this.entry.id;
                        this.newRecipeIngredientEntry.item_unit = this.newIngredientEntry.serving_size;
                        this.newRecipeIngredient();
                    },
                    newRecipeIngredient: function() {
                        myAxios.post('recipeingredients',this.newRecipeIngredientEntry)
                            .then(response => {
                                this.entry.ingredients.push(response.data);
                                this.newRecipeIngredientEntry = {};
                            });
                    },
                }
            });
            recipeComponent = Vue.component('recipe-page', {
                mixins: [entryHandlingPageMixin],
                data: function() { return { endpoint: "recipes", noMixinMounted: true, fooditems: [], mandatoryFields: ['name'],} },
                mounted: function() {
                    myAxios.get(this.endpoint).then(response => this.entries = convertRatings(response.data));
                    myAxios.get("foodItems").then(response => this.fooditems = convertRatings(response.data));
                },
                methods: { getFoodItemFromLoaded: function(id){ return this.fooditems.find(p => p.id === id); }, },
                template:
                `
                <div>
                    <div id="object-list" class="object-list">
                        <recipe v-for="item in sortedEntries"
                        :entry="item"
                        :key="item.id"
                        :endpoint="endpoint"
                        :fooditems="fooditems"></recipe>
                    
                        <button v-on:click="showNewEntry = !showNewEntry"> New Recipe </button>
                    
                    </div>

                    <new-entry-form :newEntryDisabled="newEntryDisabled" @newEntryClicked="createNewEntry">
                        <label>Name: <input v-model="newEntry.name" /> </label>
                        <label>Instructions: <textarea v-model="newEntry.details" /> </textarea></label>
                    </new-entry-form>
                </div>
                `
            });
            
            // Sign In & Sign Up
            loginComponent = Vue.component('login', {
                template:
                `
                <div class="row">
                <div class="col">

                    <div>{{ error }}</div>

                    <h1><img class="logo-img" src="{% static 'placeholder-icon.png' %}" /> PillowBook </h1>
                    <div class="form-card">
                        <div class="card-header">Sign In</div>
                        <form id="login" method="post" action="login">{% csrf_token %}
                            <label for="email"> Email </label>
                            <input type="text" id="email" name="email" placeholder="Email">
                            <label for="password"> Password </label>
                            <input type="password" id="password" name="password" placeholder="Password">
                
                            <button type="submit" form="login" value="Submit" class="btn btn-primary">Sign In</button> 
                        </form>

                        <p>Don't have an account? <a href="signup">Sign up!</a></p>
                    </div>
                </div>
                </div>
                `
            });

            signupComponent = Vue.component('signup', {
                template:
                `
                <div class="row">
                <div class="col">
                    <div> {{ error }}</div>
                
                    <h1><img class="logo-img" src="{% static 'placeholder-icon.png' %}" /> PillowBook </h1>
                    <div class="form-card">
                        <div class="card-header">Sign Up</div>
                        <form id="signup" method="post" action="signup">{% csrf_token %}
                            <label for="email"> Email </label>
                            <input type="text" id="email" name="email" placeholder="Email">
                            <label for="password"> Password </label>
                            <input type="password" id="password1" name="password1" placeholder="Password">
                            <label for="password"> Re-Enter Password </label>
                            <input type="password" id="password2" name="password2" placeholder="Password">
                
                            <button type="submit" form="signup" value="Submit" class="btn btn-primary">Submit</button> 
                        </form>
                    </div>
                </div>
                </div>
                `
            });

            // Universal 
            const router = new VueRouter({
                routes: [
                    {path: '/', component: indexComponent, meta: { title: "Home" } },
                    {path: '/login', component: loginComponent, meta: { title: "Login" } },
                    {path: '/overview', component: overviewComponent, meta: { title: "Overview" } },
                    {path: '/sleep', component: sleepComponent, meta: { title: "Sleep" } },
                    {path: '/weight', component: weightComponent, meta: { title: "Weight" } },
                    {path: '/cardio', component: cardioComponent, meta: { title: "Cardio" } },
                    {path: '/toilet', component: toiletComponent, meta: { title: "Toilet" } },
                    {path: '/sex', component: sexComponent, meta: { title: "Sex" } },
                    {path: '/period', component: periodComponent, meta: { title: "Period" } },
                    {path: '/learning', component: learningComponent, meta: { title: "Learning" } },
                    {path: '/money', component: moneyComponent, meta: { title: "Money" } },
                    {path: '/study', component: studyComponent, meta: { title: "Study" } },
                    {path: '/todo', component: todoComponent, meta: { title: "To-Do" } },
                    {path: '/pursuitprogress', component: pursuitprogressComponent, meta: { title: "Pursuit Progress" } },
                    {path: '/literature', component: literatureComponent, meta: { title: "Literature" } },
                    {path: '/film', component: filmComponent, meta: { title: "Film" } },
                    {path: '/television', component: televisionComponent, meta: { title: "Television" } },
                    {path: '/videogame', component: vgComponent, meta: { title: "Video Game" } },
                    {path: '/boardgame', component: bgComponent, meta: { title: "Board Game" } },
                    {path: '/music', component: musicComponent, meta: { title: "Music" } },
                    {path: '/podcast', component: podcastComponent, meta: { title: "Podcast" } },
                    {path: '/beer', component: beerComponent, meta: { title: "Beer" } },
                    {path: '/wine', component: wineComponent, meta: { title: "Wine" } },
                    {path: '/cheese', component: cheeseComponent, meta: { title: "Cheese" } },
                    {path: '/cooking', component: cookingComponent, meta: { title: "Cooking" } },
                    {path: '/grocerypurchase', component: groceriesComponent, meta: { title: "Groceries" } },
                    {path: '/meal', component: mealsComponent, meta: { title: "Meal" } },
                    {path: '/travel', component: travelComponent, meta: { title: "Travel" } },
                    {path: '/modules', component: moduleComponent, meta: { title: "Modules" } },
                    {path: '/projects', component: projectComponent, meta: { title: "Projects" } },
                    {path: '/quizzes', component: quizComponent, meta: { title: "Quizzes" } },
                    {path: '/pursuits', component: pursuitComponent, meta: { title: "Pursuits" } },
                    {path: '/cardioexercises', component: cardioexerciseComponent, meta: { title: "Cardio Exercises" } },
                    {path: '/weightexercises', component: weightexerciseComponent, meta: { title: "Weight Exercises" } },
                    {path: '/fooditems', component: fooditemComponent, meta: { title: "Food Items" } },
                    {path: '/recipes', component: recipeComponent, meta: { title: "Recipes" } },
                    {path: '/filmsToWatch', component: filmwishComponent, meta: { title: "Films To Watch" } },
                    {path: '/boardgamesToPlay', component: boardgamewishComponent, meta: { title: "Board Games To Play" } },
                    {path: '/booksToRead', component: literaturewishComponent, meta: { title: "Books To Read" } },
                ]
            });

            router.afterEach((toRoute, fromRoute) => {
                window.document.title = "PillowBook | " + toRoute.meta.title;
            });

            var app = new Vue({
                el: '#app',
                router: router,
                delimiters: ["[{","}]"],
                data: { options: optionsStore, },
                computed: {
                    showOptionsButton: function() { return ['/todo', '/learning'].indexOf(this.$route.path) > -1; },
                    showSideButtons: function() { 
                        sideButtons = [];
                        if (this.$route.path === '/todo'){ sideButtons.push('pursuits'); sideButtons.push('projects'); }
                        if (this.$route.path === '/'){ sideButtons.push('modules'); }
                        if (this.$route.path === '/weight'){ sideButtons.push('weight'); }
                        if (this.$route.path === '/cardio'){ sideButtons.push('cardio'); }
                        if (this.$route.path === '/study'){ sideButtons.push('quizzes'); }
                        if (this.$route.path === '/literature'){ sideButtons.push('booksToRead'); }
                        if (this.$route.path === '/film'){ sideButtons.push('filmsToWatch'); }
                        if (this.$route.path === '/boardgame'){ sideButtons.push('boardgamesToPlay'); }
                        if (this.$route.path === '/pursuitprogress'){ sideButtons.push('pursuits'); }
                        if (this.$route.path === '/cooking'){ sideButtons.push('fooditems'); sideButtons.push('recipes'); }
                        if (this.$route.path === '/grocerypurchase'){ sideButtons.push('fooditems'); }
                        if (this.$route.path === '/meal'){ sideButtons.push('fooditems'); sideButtons.push('recipes'); }
                        return sideButtons; 
                    },
                    showDisableDrag: function() { return this.$route.path === "/todo"; },
                },
                    
            }).$mount('#app');
            
        }
    </script>


        {% if user.is_authenticated %}

        <div id="app">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="navbar-collapse collapse dual-collapse2 order-md-0 order-1 w-100">
                    <ul class="navbar-nav mr-auto">

                        <li id="navbar-options" class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownOptions" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="fas fa-wrench"></i> Options
                            </a>

                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                
                                <a class="dropdown-item" href="{% url 'logout'%}?next={{request.path}}"><i class="fas fa-sign-out-alt"></i> Logout </a>
                                <a class="dropdown-item" href="#" onclick="event.stopPropagation();" >
                                    <label> Disable Dragging <input type="checkbox" v-model="options.state.disableDrag"> </label>
                                </a>
                                <a class="dropdown-item" href="#" onclick="event.stopPropagation();">
                                    <label> Tab Indents Text <input type="checkbox" v-model="options.state.tabIndent"> </label>
                                </a>

                            </div>
                        </li>

                    </ul>
                </div>
                
                <div class="order-0 mx-auto">
                    <a class="navbar-brand mx-auto" href="{% url 'index' %}" ><img class="logo-img" src="{% static 'placeholder-icon.png' %}" /> PillowBook </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".dual-collapse2">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <div class="navbar-collapse collapse dual-collapse2 order-2 w-100">
                    <ul class="navbar-nav ml-auto">
                        

                        <li id="navbar-related" class="nav-item dropdown" v-if="showSideButtons.length">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownSideButtons" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-code-branch"></i> Related
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <router-link to="/modules"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('modules')"> <span> Modules &#128306; </span> </a> </router-link>
                                    <router-link to="/projects"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('projects')">  <span> Projects &#128193; </span> </a>  </router-link>
                                    <router-link to="/quizzes"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('quizzes')"><span> Quizzes &#127822; </span> </a> </router-link>
                                    <router-link to="/pursuits"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('pursuits')"><span> Pursuits &#128209; </span> </a> </router-link>
                                    <router-link to="/cardio"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('cardio')"><span> Cardio 🏃 </span> </a> </router-link>
                                    <router-link to="/weight"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('weight')"><span> Weight 💪 </span> </a> </router-link>
                                    <router-link to="/fooditems"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('fooditems')"><span> Foods 🍔 </span> </a> </router-link>
                                    <router-link to="/recipe"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('recipes')"><span> Recipe 🍲 </span> </a> </router-link>
                                    <router-link to="/filmsToWatch"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('filmsToWatch')"><span> To Watch 🎥 </span> </a> </router-link>
                                    <router-link to="/boardgamesToPlay"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('boardgamesToPlay')"><span> To Play 🎲 </span> </a> </router-link>
                                    <router-link to="/booksToRead"> <a class="dropdown-item" href="#" v-if="showSideButtons.includes('booksToRead')"><span> To Read 📖 </span> </a> </router-link>
                            </div>
                        </li>
                    </ul>
                </div>

            </nav>

            <div class="container-fluid">
                <router-view></router-view>      
            </div>

            {% else %}
            {% endif %} 
        </div>
        

</body>
</html>
